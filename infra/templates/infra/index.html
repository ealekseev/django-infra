{% extends "base.html" %}

{% block title %}Поставщики{% endblock %}
{% block content %}
<form class="form-horizontal" role="form" action="{% url 'infra:retailer_list' %}" method="post">{% csrf_token %}
  <div class="form-group">
    <label for="id_name" class="col-sm-2 control-label">Название</label>
    <div class="col-sm-10">
      <input type="text" id="id_name" name="name" />
    </div>
  </div>
  <div class="form-group">
    <label for="id_contract_id" class="col-sm-2 control-label">Номер договора</label>
    <div class="col-sm-10">
      <input type="text" id="id_contract_id" name="contract_id" />
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-default">Искать</button>
    </div>
  </div>
</form>
{% if retailers %}
    <div class="container-fluid">
    <div class="row-fluid" style="width:20%">
    <div class="span12" style="text-align:left">
    <div class="list-group">
    {% for  retailer in retailers %}
        <a class="list-group-item" href="{% url 'infra:retailer_details' retailer.id %}">{{ retailer }}</a></li>
    {% endfor %}
    </div>
    </div>
    </div>
    </div>
    <div class="form-group">
    <div class="col-sm-10">
    {% if retailers.paginator.num_pages and retailers.paginator.num_pages > 1 %}
    <ul class="pagination pagination-sm">
        <li {% if not retailers.has_previous %}class="disabled"{% endif %}><a href="{% if retailers.has_previous %}?page={{ retailers.previous_page_number }}{% else %}#{% endif %}"><span>&laquo;</span></a></li>
        {% for page in retailers.paginator.page_range %}
          <li {% if retailers.number == page %}class="active"{% endif %}><a href="?page={{ page }}"><span>{{ page }} {% if retailers.page == page %}<span class="sr-only">(текущая)</span>{% endif %}</span></a></li>
        {% endfor %}
        <li {% if not retailers.has_next %}class="disabled"{% endif %}><a href="{% if retailers.has_next %}?page={{ retailers.next_page_number }}{% else %}#{% endif %}"><span>&raquo;</span></a></li>
    </ul>
    </div>
    </div>
    {% endif %}
{% else %}
    <p>Список поставщиков пуст.</p>
{% endif %}
{% endblock %}
